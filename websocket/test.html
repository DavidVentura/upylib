<html>
    <head>
        <title>Micropython WebSocket Test</title>
        <script language='Javascript'>

            function on_load() {
                // alert("hello");
                document.getElementById('console').innerHTML += "started<BR/>";
            }


            // new Websocket(url, subprotocols)
            //      where 
            //          url begins ws://
            //          subprotocols is string or array (list) of strings
            //              e.g. ['soap','xmpp']
            var conn = new WebSocket("ws://localhost")

            // when connection opens send some data
            conn.onopen = function () {
                conn.send("ping");
            }

            // on error log to console
            conn.onerror = function (error) {
                console.log("Websocket error: " + error);
            }

            // display messages from server
            conn.onmessage = function (msg) {
                // console.log("server sent: " + msg)
                document.getElementById('console').innerHTML += msg+"<BR/>";
            }

        </script>
    </head>
    <body onload="on_load()">
        <DIV id='console'></DIV>
    </body>
</html>